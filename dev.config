%% -*- mode: erlang -*-
%% Copyright (c) 2022 Peter Morgan <peter.james.morgan@gmail.com>
%%
%% Licensed under the Apache License, Version 2.0 (the "License");
%% you may not use this file except in compliance with the License.
%% You may obtain a copy of the License at
%%
%% http://www.apache.org/licenses/LICENSE-2.0
%%
%% Unless required by applicable law or agreed to in writing, software
%% distributed under the License is distributed on an "AS IS" BASIS,
%% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
%% See the License for the specific language governing permissions and
%% limitations under the License.

[{kernel, [{logger_level, notice},
           {logger,
            [{module_level, debug, []},

             {module_level, notice, [supervisor_bridge,
                                     supervisor]},

             {module_level, emergency, [application_controller]},

             {handler,
              default,
              logger_std_h,
              #{formatter => {logger_formatter,
                              #{template => [[logger_formatter, header],
                                             {pid, [" ", pid, ""], ""},
                                             {mfa, [" ", mfa, ":", line], ""},
                                             "\n",
                                             msg,
                                             "\n"],
                                legacy_header => true,
                                single_line => false}}}}]}]},

 {pgmp, [{pgmp_socket_log_n, 20},
%%         {pgmp_socket_trace, true},
         {pgmp_socket_log, true},

%%         {database_hostname, "192.168.1.230"},
         {database_hostname, "localhost"},
         {database_user, <<"pmorgan">>},
         {database_name, <<"pmorgan">>},
%%         {database_name, <<"scram">>},
%%         {database_password, <<"98MgGgBpW4xmOiU0">>},

         {database_replication, <<"true">>},

%%         {pgmp_replication_enabled, true},

%%         {pgmp_types_enabled, false},
%%         {pgmp_types_trace, true},

%%         {pgmp_replication_logical_snapshot_manager_trace, true},

         {pgmp_connection_manager_trace, true},


         {pgmp_mm_trace, true},
         {pgmp_mm_log_n, 20},
         {pgmp_mm_log, true}]}].
